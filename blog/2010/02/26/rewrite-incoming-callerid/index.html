
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Rewrite Incoming CallerID - Captain's Log</title>
  <meta name="author" content="Jon Moore">

  
  <meta name="description" content="We&rsquo;re using asterisk, and as part of the dial plan, a 9 is required before the number to make calls out to the PSTN.  Since our phones have a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.captainslog.me/blog/2010/02/26/rewrite-incoming-callerid">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Captain's Log" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Captain's Log</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.captainslog.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Rewrite Incoming CallerID</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-02-26T15:38:27-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:38 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>We&rsquo;re using asterisk, and as part of the dial plan, a 9 is required before the number to make calls out to the PSTN.  Since our phones have a incoming call log, it would be very convient to have asterisk rewrite the CallerID value on calls from the PSTN to include this leading digit.  I found this was rather easy to accomplish.  Adding something similar to the following to whatever extension handles your incoming calls, all CallerID numbers will have a 9 added to the front.
<code>
exten =&gt; s,1,Set(CALLERID(num)=9${CALLERID(num)})
</code>
And proceed with your normal call routing logic.  Change the preceding digit to whatever matches your system.  If you have several extensions this is going to be used with, you could benefit from using a global variable for the leading digit.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">jonmoo</span></span>

      




<time class='entry-date' datetime='2010-02-26T15:38:27-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>3:38 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/quickfire/'>quickfire</a>, <a class='category' href='/blog/categories/tips/'>tips</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://www.captainslog.me/blog/2010/02/26/rewrite-incoming-callerid/" data-via="" data-counturl="http://www.captainslog.me/blog/2010/02/26/rewrite-incoming-callerid/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/01/30/share-files-list-in-dropbox-public-folder/" title="Previous Post: Share list of files in DropBox Public folder">&laquo; Share list of files in DropBox Public folder</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/03/08/why-use-zfs-with-freenas/" title="Next Post: Why use ZFS with FreeNAS?">Why use ZFS with FreeNAS? &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/08/11/using-smart-to-monitor-hard-drive-health/">Using Smart to Monitor Hard Drive Health</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/31/crashplandesktop-on-ubuntu-14-04/">CrashplanDesktop on Ubuntu 14.04</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/06/disable-networkmanager-in-centos-6/">Disable NetworkManager in CentOS 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/22/centos-6-kvm-installation/">CentOS 6 KVM Installation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/11/mikrotik-winbox-on-fedora-20/">Mikrotik Winbox on Fedora 20</a>
      </li>
    
  </ul>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/105001737019747914994?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Jon Moore -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
